doctype html
html
	head
		block topheader
		include ./header.pug
		include ./datatables.pug

		script.
			const id = "!{id}";
			window.addEventListener("load", async () => {
				const title = document.createElement("title");
				const response = await fetch(`/api/data/dall-e/detail/${id}`);
				if (response.status === 404) {
					title.text = "No images found";
					return;
				}

				const result = await response.json();
				const imageWrapper = document.getElementById("imagesGrid");
				for (const base64Image of result.data.images) {
					const img = document.createElement("img");
					img.classList.add("grid-image");
					img.setAttribute("src", `data:image/png;base64,${base64Image}`);
					imageWrapper.appendChild(img);
				}

				title.textContent = result.data.prompt ?? "(no description available)";
			});

		style.
			div#wrapper {
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
			}

			div#imagesGrid {
				display: inline-grid;
				gap: 5px;
				grid-template-columns: repeat(3, 1fr);
			}

			img.grid-image {
				width: 100%;
				max-height: 100%;
				object-fit: cover;
			}

		meta(charset="UTF-8")

		include ./navigation.pug
	body
		block navigation


		div(id="wrapper")
			h5(id="title")
			div(id="imagesGrid")
			h6(id="description" class="text-center text-muted")
				| Generated by the DALL-E API, as available on
				a(href="https://huggingface.co/spaces/dalle-mini/dalle-mini").
					HuggingFace
				| .
